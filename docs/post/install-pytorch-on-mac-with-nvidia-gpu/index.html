<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.50" />
  <meta name="author" content="Zhaoyu Li">
  <meta name="description" content="Ph.D. in Computer Science">

  
  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="/css/highlight.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  


  

  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat%3a400%2c700%7cRoboto%3a400%2c400italic%2c700%7cRoboto%2bMono">
  
  <link rel="stylesheet" href="/styles.css">
  
  <link rel="stylesheet" href="/css/custom.css">
  

  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-99116200-1', 'auto');
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  

  <link rel="alternate" href="" type="application/rss+xml" title="Zhaoyu Li">
  <link rel="feed" href="" type="application/rss+xml" title="Zhaoyu Li">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="https://zhaoyu.li/post/install-pytorch-on-mac-with-nvidia-gpu/">

  

  <title>Install PyTorch on Mac with Nvidia GPU | Zhaoyu Li</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Zhaoyu Li
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/research">
            
            <span>Research</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/vitae">
            
            <span>Vitae</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/teaching">
            
            <span>Teaching</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/post">
            
            <span>Posts</span>
          </a>
        </li>

        
        

        
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true">
            More
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            
            <li class="nav-item">
              <a href="/algorithms">
                
                <span>Algorithms</span>
              </a>
            </li>
            
            <li class="nav-item">
              <a href="/certificates">
                
                <span>Course Certificates</span>
              </a>
            </li>
            
            <li class="nav-item">
              <a href="/more">
                
                <span>More About Me</span>
              </a>
            </li>
            
          </ul>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
          </a>
        </li>

        
        

        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="universal-wrapper">
    <h1 itemprop="name">Install PyTorch on Mac with Nvidia GPU</h1>
    

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2017-08-20 12:00:00 &#43;0000 UTC" itemprop="datePublished">
      Sun, Aug 20, 2017
    </time>
  </span>

  
  <span class="article-reading-time">
    3 min read
  </span>
  

  

  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="/tags/pytorch">pytorch</a
    >, 
    
    <a href="/tags/deep-learning">deep learning</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Install%20PyTorch%20on%20Mac%20with%20Nvidia%20GPU&amp;url=https%3a%2f%2fzhaoyu.li%2fpost%2finstall-pytorch-on-mac-with-nvidia-gpu%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fzhaoyu.li%2fpost%2finstall-pytorch-on-mac-with-nvidia-gpu%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fzhaoyu.li%2fpost%2finstall-pytorch-on-mac-with-nvidia-gpu%2f&amp;title=Install%20PyTorch%20on%20Mac%20with%20Nvidia%20GPU"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fzhaoyu.li%2fpost%2finstall-pytorch-on-mac-with-nvidia-gpu%2f&amp;title=Install%20PyTorch%20on%20Mac%20with%20Nvidia%20GPU"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Install%20PyTorch%20on%20Mac%20with%20Nvidia%20GPU&amp;body=https%3a%2f%2fzhaoyu.li%2fpost%2finstall-pytorch-on-mac-with-nvidia-gpu%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3543914617929384"
     data-ad-slot="1936025051"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      

<h3>Table of Contents</h3>
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#download-xcode">Download Xcode</a>
<ul>
<li><a href="#update-and-upgrade-homebrew">Update and Upgrade Homebrew</a></li>
<li><a href="#install-conda-environment">Install Conda Environment</a></li>
<li><a href="#install-extra-python-packages">Install Extra Python Packages</a></li>
<li><a href="#install-whatever-useful-for-you-or-for-your-project">Install whatever useful for you or for your project.</a></li>
<li><a href="#verify-your-installation">Verify Your Installation</a></li>
</ul></li>
</ul></li>
</ul>
</nav>


<p>Since PyTorch doesn’t provide binary package for Mac OS with GPU support, I have to compile the PyTorch from source. In this post, I will keep a note of what I did in the whole process. The whole process is based on the official tutorial: <a href="https://github.com/pytorch/pytorch#from-source" target="_blank">https://github.com/pytorch/pytorch#from-source</a>. This post will assume you have already install CUDA 8.0, and cuDNN v6.0 (April 27, 2017) for CUDA 8.0 correctly.</p>

<h2 id="download-xcode">Download Xcode</h2>

<hr />

<p>Download the newest version of Xcode from App Store. The version I’m using is 8.3.2.</p>

<p><img src="/img/blog/xcode1.png" alt="" /></p>

<h3 id="update-and-upgrade-homebrew">Update and Upgrade Homebrew</h3>

<hr />

<p>Type the following command to update Homebrew package index and upgrade your exsiting packages.</p>

<pre><code>brew update
brew upgrade
</code></pre>

<h3 id="install-conda-environment">Install Conda Environment</h3>

<hr />

<p>Anaconda environment is highly recommended by official tutorial since we will get a high-quality BLAS library (MKL) and you get a controlled compiler version regardless of your Linux distro.</p>

<p>Here I will install <a href="https://conda.io/docs/user-guide/install/index.html" target="_blank">Miniconda</a>, a mini version of Anaconda that includes only conda and its dependencies. If you prefer to have conda plus over 720 open source packages, install Anaconda.</p>

<pre><code>brew cask search conda
brew cask install miniconda
</code></pre>

<p>Then add the conda path to your system variable $PATH, and use  source command to make it work.</p>

<pre><code>export PATH=/usr/local/miniconda3/bin:&quot;$PATH&quot;
</code></pre>

<p>Now check your Python, you will find your Python is now the conda one with version 3.6:</p>

<p><img src="/img/blog/python_output.png" alt="" /></p>

<h3 id="install-extra-python-packages">Install Extra Python Packages</h3>

<hr />

<p>There are some Python packages that would be useful. You can install them using the following command:</p>

<pre><code>conda install matplotlib ipython jupyter
conda install numpy pyyaml setuptools cmake cffi
</code></pre>

<h3 id="install-whatever-useful-for-you-or-for-your-project">Install whatever useful for you or for your project.</h3>

<hr />

<p>Compile and Install From PyTorch Source</p>

<p>Use the following command to check out the source repo of PyTorch:</p>

<pre><code>git clone https://github.com/pytorch/pytorch.git
</code></pre>

<p>Now check your Clang version:</p>

<p><img src="/img/blog/clangv1.png" alt="" /></p>

<p>My Clang version is 8.1.0, however the current CUDA is not compatible with the Command Line Tool in this version of Clang. We would use the Command Line Tool from Xcode 8.2 instead. Go to <a href="https://developer.apple.com/download/more/" target="_blank">Apple Developer download website</a>, download the following tool:</p>

<p><img src="/img/blog/cmd8.2.png" alt="" /></p>

<p>After install it, now use the following command to switch the current Command Line Tool:</p>

<pre><code>sudo xcode-select --switch /Library/Developer/CommandLineTools
</code></pre>

<p>Now type <code>clang --version</code> you would see the Clang version becomes 8.0.0:</p>

<pre><code>➜  ~ clang --version
Apple LLVM version 8.0.0 (clang-800.0.42.1)
Target: x86_64-apple-darwin16.7.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin
</code></pre>

<p>Type the following command for CMAKE configuration:</p>

<pre><code>export CMAKE_PREFIX_PATH=/usr/local/miniconda3/
</code></pre>

<p>Replace the <code>/usr/local/miniconda3/</code> to your own conda root directory.</p>

<p>Finally type the following command to compile and install PyTorch (it will take some time):</p>

<pre><code>cd ~/pytorch
MACOSX_DEPLOYMENT_TARGET=10.9 CC=clang CXX=clang++ python setup.py install
</code></pre>

<h3 id="verify-your-installation">Verify Your Installation</h3>

<hr />

<p>Use the following command or run your own PyTorch program to verify your installation is correct.</p>

<p>Note: you can NOT run Python in the PyTorch source folder since there is a folder called torch in the same directory, which will confuse the Python which to import. See this <a href="https://github.com/pytorch/pytorch/issues/574" target="_blank">issue</a> for details.</p>

<p><img src="/img/blog/pytorch_succ.png" alt="" /></p>

<p>Enjoy!</p>

    </div>
  </div>

</article>



<div class="universal-wrapper">
  <h3>Related</h3>
  <ul>
    
    <li><a href="/post/compiling-tensorflow-on-mac-os/">Compiling Tensorflow on Mac OS</a></li>
    
    <li><a href="/post/tensorflow-installation/">TensorFlow Installation</a></li>
    
  </ul>
</div>


<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="https://zhaoyu.li/post/compiling-tensorflow-on-mac-os/"><span
      aria-hidden="true">&larr;</span> Compiling Tensorflow on Mac OS</a></li>
    

    
    <li class="next"><a href="https://zhaoyu.li/post/blast-notes/">Some Notes about BLAST&#43; <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>

</div>

<div class="universal-wrapper">
  
<section id="comments">
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "zl-blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Zhaoyu Li &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

    <link href="https://fonts.googleapis.com/css?family=Bad+Script" rel="stylesheet">

  </body>
</html>

